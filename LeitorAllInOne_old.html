<html>
  <head>
    <title>\\ Leitor //</title>
  </head>

  <body onload="init()">
    <script>
    var timming;
    var textVector = [];
    var c;
    var ctx;
    var Exec;

    function init(){
      c = document.getElementById("render");
      ctx = c.getContext("2d");
    
      backC();
      writeC("Hello World");
      document.getElementById("stop").disabled = true;
      document.getElementById("run").disabled = false;
    }

    function backC(){
      //Limpa toda a area do Canvas
      ctx.clearRect(0,0,480,320);
      // Cria uma linha vermelha no meio do canvas
      ctx.strokeStyle="red";
      ctx.moveTo(220,60);
      ctx.lineTo(220,230);
      ctx.stroke();
      
    }
   
    function writeC(texto){
      //alinha texto e exibe
      ctx.font = "48px Arial";
      ctx.textAlign="center";
      ctx.fillText(texto,220,160);
    }

    function frameText(){
      backC();
      if(textVector.length>0){
        writeC(textVector.shift());
      }
      else{
        stopText();
        writeC("");
      }
    }

    //wpm words per minute - palavras por minuto
    function valideWpm(){
      if(document.getElementById("wpm").value>0){
       timming = 60000/document.getElementById("wpm").value; 
      }
      else{
       timming = 250;//velocidade padrão
       document.getElementById("wpm").value = timming;
      }
    }

    function runText(){
      valideWpm();
      textVector = document.getElementById("fonte").value.split(" ");
      Exec = setInterval("frameText()", timming);
      document.getElementById("stop").disabled = false;
      document.getElementById("run").disabled = true;
    }
    
    function stopText(){
      clearInterval(Exec);
      document.getElementById("stop").disabled = true;
      document.getElementById("run").disabled = false;
    }
    
    </script>


    <table style="width:100%">
    <tr>
      <th>
      <canvas id="render" width="480" height="320"></canvas>
      </th>
    </tr>
    <tr>
      <th>
      Palavras por minuto: <input type="text" id="wpm" size=3 value=250>
      </th>
    </tr>
    <tr>
      <th>
      <button id="run" type="button"onclick="runText()">TESTE</button>
      <button id="stop" type="button"onclick="stopText()">STOP</button>
      </th>
    </tr>

    <tr>
      <th>
      <textarea id="fonte" rows=32 cols=100></textarea>
      </th>
    </tr>
    </table>
  </body>
</html